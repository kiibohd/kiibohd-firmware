[workspace]
members = [
    "common/xtask",
    "hexgears/gemini",
    "inputclub/keyboards/keystone/tkl",
    "inputclub/keyboards/wz",
]

[patch.crates-io]
kll-core = { path = "../kiibohd-core/kll-core" }
kll-hid = { path = "../kiibohd-core/kll-hid" }
kiibohd-keyscanning = { path = "../kiibohd-core/kiibohd-keyscanning" }
kiibohd-usb = { path = "../kiibohd-core/kiibohd-usb" }
kiibohd-hid-io = { path = "../kiibohd-core/kiibohd-hid-io" }
usb-device = { path = "../usb-device" }
embassy = { git = "https://github.com/embassy-rs/embassy" }
#embassy-nrf = { git = "https://github.com/embassy-rs/embassy" }
embassy-macros = { git = "https://github.com/embassy-rs/embassy" }
nrf-hal-common = { path = "../nrf-hal/nrf-hal-common" }

[patch."https://github.com/haata/usb-device.git"]
usb-device = { path = "../usb-device" }

[patch."https://github.com/haata/nrf-hal.git"]
nrf-hal-common = { path = "../nrf-hal/nrf-hal-common" }

# XXX Important when using gdb XXX
# NOTE: Comment this section out when using gdb for a better experience
#       Will increase binary size considerably though.
[profile.dev]
codegen-units = 1
debug = 2
debug-assertions = true # <-
incremental = false
opt-level = 3 # <-
overflow-checks = true # <-

[profile.release]
codegen-units = 1
debug = 2
debug-assertions = false # <-
incremental = false
lto = 'fat'
opt-level = 3 # <-
overflow-checks = false # <-
